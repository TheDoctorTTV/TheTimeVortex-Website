<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/style.css">
    <title>TheTimeVortex</title>
    <link rel="shortcut icon" type="image/x-icon" href="\icons\WebsiteLogo.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="\icons\WebsiteLogo.ico">
    <link rel="icon" type="image/png" sizes="192x192" href="\icons\WebsiteLogo.ico">
    <meta property="og:type" content="website">
    <meta property="og:title" content="TheTimeVortex" />
    <meta property="og:description" content="A group of creators making entertainment." />
    <meta property="og:url" content="https://thetimevortex.net" />
    <meta property="og:image" content="icons/WebsiteLogo.ico" />
    <script src="/js/header-footer.js"></script>
    <script type="text/javascript" src="/js/darkmode.js" defer></script>
    <script src="/public/auth.js"></script>
    <script>
        (function () {
            const darkmode = localStorage.getItem('darkmode');
            const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

            if (darkmode === 'dark' || (darkmode === 'system' && systemPrefersDark)) {
                document.documentElement.classList.add('darkmode');
            }
        })();
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Kodchasan:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;1,200;1,300;1,400;1,500;1,600;1,700&display=swap"
        rel="stylesheet">


</head>

<body>
    <global-header></global-header>
    <script>
        // Wait for an element to appear in the DOM
        function waitFor(selector, timeout = 5000) {
            return new Promise((resolve, reject) => {
                const el = document.querySelector(selector);
                if (el) return resolve(el);
                const obs = new MutationObserver(() => {
                    const el2 = document.querySelector(selector);
                    if (el2) { obs.disconnect(); resolve(el2); }
                });
                obs.observe(document.documentElement, { childList: true, subtree: true });
                setTimeout(() => { obs.disconnect(); reject(new Error('timeout')); }, timeout);
            });
        }

        async function initAuthUI() {
            // ensure the custom element has rendered its innerHTML
            await customElements.whenDefined('global-header');
            const container = await waitFor('#auth-container').catch(() => null);
            if (!container) return;

            try {
                const res = await fetch('/me', { credentials: 'include' });
                if (res.ok) {
                    const u = await res.json();
                    const avatarUrl = u.avatar
                        ? `https://cdn.discordapp.com/avatars/${u.id}/${u.avatar}.png?size=64`
                        : `https://cdn.discordapp.com/embed/avatars/0.png`;

                    container.innerHTML = `
          <div class="user-pill" style="display:flex;align-items:center;gap:8px">
            <img src="${avatarUrl}" alt="${u.username}"
                 style="width:32px;height:32px;border-radius:50%"/>
            <span>${u.global_name || u.username}</span>
            <form method="post" action="/logout" style="margin:0">
              <button class="invite" style="margin-left:8px">Logout</button>
            </form>
          </div>`;
                } else {
                    // not logged in: ensure button exists and wire it
                    if (!document.getElementById('login')) {
                        container.innerHTML = `<button class="invite" id="login">Login</button>`;
                    }
                    const btn = document.getElementById('login');
                    if (btn) btn.addEventListener('click', () => { window.location.href = '/login'; });
                }
            } catch (e) {
                console.error('Auth check failed:', e);
            }
        }

        document.addEventListener('DOMContentLoaded', initAuthUI);
    </script>
    <div class="container">
        <div class="main">
            <h1>About Me</h1>
            <p class="about-me">
                Hey, I'm <strong>CBoyDoesStuff</strong>! I love to play video games and make people laugh!!!! Enjoy the
                content and i hope to be the best streamer you've ever seen!
            </p>
            <div class="pfp-container">
                <img class="pfp" src="/PFPs/CBoyPFP.webp" alt="CBoyDoesStuff">
            </div>
        </div>
        <div class="discord">
            <h1>CBoy's Wannabe Club Discord!</h1>
            <p>Want To Be A Loser?!?! COME AND JOIN THE WANNABES!!!</p>
            <br><br>
            <h3><a class="discordinvite" target="_blank">Currently under construction.</a></h3>
            <!-- href="https://discord.gg/8aCHvWKDee" -->
        </div>
    </div>

    <div class="social-container">
        <div class="socials">
            <h1>CBoyDoesStuff's Social Media</h1>
            <br><br>
            <ul class="social-page-icons">
                <li class="card">
                    <a href="https://www.youtube.com/@cboydoesstuffreal" target="_blank">
                        <img src="/icons/youtube.svg" alt="Youtube">
                        <span class="creator-name">Youtube</span>
                    </a>
                </li>

                <li class="card">
                    <a href="https://www.twitch.tv/cboydoesstuff" target="_blank">
                        <img src="/icons/twitch.svg" alt="Twitch">
                        <span class="creator-name">Twitch</span>
                    </a>
                </li>

                <li class="card">
                    <a href="https://x.com/CBoyDoesStuff" target="_blank">
                        <img src="/icons/twitter.svg" alt="Twitter">
                        <span class="creator-name">Twitter (X)</span>
                    </a>
                </li>

                <!-- <li class="card">
                    <a href="https://discord.gg/8aCHvWKDee" target="_blank">
                        <img src="/icons/Discord.svg" alt="Discord Server">
                        <span class="creator-name">Discord</span>
                    </a>
                </li> -->

                <li class="card">
                    <a href="https://pandora.app.link/QRdf5B4OWVb" target="_blank">
                        <img class="theme-icon" src="/icons/pandora-b.webp" data-light-icon="/icons/pandora-b.webp"
                            data-dark-icon="/icons/pandora-w.webp" alt="Pandora">
                        <span class="creator-name">Pandora</span>
                    </a>
                </li>

                <li class="card">
                    <a href="https://open.spotify.com/artist/4KJllzVnOipe0J5t996eRl?si=19eONrF-Reu1GV8a64Ylog"
                        target="_blank">
                        <img src="/icons/spotify.svg" alt="Spotify">
                        <span class="creator-name">Spotify</span>
                    </a>
                </li>

                <li class="card">
                    <a href="https://www.youtube.com/channel/UCFOqK70yyqm0rJMO5kH5zEQ" target="_blank">
                        <img src="/icons/youtubemusic.svg" alt="YouTube Music">
                        <span class="creator-name">YouTube Music</span>
                    </a>
                </li>
            </ul>



        </div>
        <script>
            const injectCursorPosition = ({ x, y }) => {
                document.documentElement.style.setProperty('--x', Math.round(x) + 'px');
                document.documentElement.style.setProperty('--y', Math.round(y) + 'px');
            };

            document.body.addEventListener('pointermove', injectCursorPosition);
        </script>

        <script>
            function updateIconsForTheme(isDark) {
                document.querySelectorAll('.theme-icon').forEach(img => {
                    const newSrc = isDark ? img.dataset.darkIcon : img.dataset.lightIcon;
                    if (img.src !== newSrc) img.src = newSrc;
                });
            }

            // Detect current theme
            const darkPref = localStorage.getItem('darkmode');
            const systemDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const isDark = darkPref === 'dark' || (darkPref === 'system' && systemDark);

            updateIconsForTheme(isDark);

            // Auto-update icons on theme toggle
            const observer = new MutationObserver(() => {
                const isNowDark = document.documentElement.classList.contains('darkmode');
                updateIconsForTheme(isNowDark);
            });

            observer.observe(document.documentElement, { attributes: true, attributeFilter: ['class'] });
        </script>
    </div>
    <global-footer></global-footer>
</body>

</html>